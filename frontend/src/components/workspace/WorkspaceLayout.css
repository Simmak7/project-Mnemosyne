/* WorkspaceLayout.css - Styles for the 3-pane workspace */
/* Phase 2: Neural Glass Design System Integration */

.workspace-layout {
  width: 100%;
  height: 100vh;
  overflow: hidden;
  /* Fallback for non-Neural Glass mode */
  background: var(--bg-primary);
}

/* Neural Glass Theme Override */
.workspace-layout.ng-theme {
  background: transparent; /* Use ng-ambient-bg gradient */
}

.workspace-panel-group {
  height: 100%;
}

.workspace-panel {
  height: 100%;
  overflow: hidden;
  /* Fallback background */
  background: var(--bg-primary);
  border-right: 1px solid var(--border-color);
}

/* Neural Glass Panel Styles */
.workspace-layout.ng-theme .workspace-panel {
  background: transparent;
  border: none;
  margin: var(--ng-space-2, 8px);
  border-radius: var(--ng-radius-xl, 12px);
}

.workspace-layout.ng-theme .workspace-panel.ng-glass {
  background: var(--ng-glass-bg, rgba(0, 0, 0, 0.4));
  backdrop-filter: blur(var(--ng-blur-lg, 20px));
  -webkit-backdrop-filter: blur(var(--ng-blur-lg, 20px));
  border: 1px solid var(--ng-glass-border, rgba(255, 255, 255, 0.05));
}

.workspace-layout.ng-theme .workspace-panel.ng-glass-light {
  background: var(--ng-glass-bg-light, rgba(0, 0, 0, 0.3));
  backdrop-filter: blur(var(--ng-blur-md, 12px));
  -webkit-backdrop-filter: blur(var(--ng-blur-md, 12px));
  border: 1px solid var(--ng-glass-border-subtle, rgba(255, 255, 255, 0.03));
}

.workspace-panel:last-child {
  border-right: none;
}

/* Glass Resize Handles */
.workspace-resize-handle {
  position: relative;
  width: 6px;
  background: transparent;
  cursor: col-resize;
  transition:
    background-color var(--ng-transition-fast, 100ms ease-out),
    box-shadow var(--ng-transition-fast, 100ms ease-out);
  z-index: 10;
  flex-shrink: 0;
}

/* Legacy non-glass handle */
.workspace-layout:not(.ng-theme) .workspace-resize-handle {
  background: var(--border-color);
}

.workspace-layout:not(.ng-theme) .workspace-resize-handle:hover,
.workspace-layout:not(.ng-theme) .workspace-resize-handle:active {
  background: var(--accent-color);
}

/* Glass resize handle hover/active states */
.workspace-layout.ng-theme .workspace-resize-handle:hover {
  background: var(--ng-accent-ai, #818cf8);
  opacity: 0.3;
}

.workspace-layout.ng-theme .workspace-resize-handle:active,
.workspace-layout.ng-theme .workspace-resize-handle[data-resize-handle-active] {
  background: var(--ng-accent-ai, #818cf8);
  opacity: 0.5;
  box-shadow: 0 0 12px var(--ng-accent-ai-glow, rgba(129, 140, 248, 0.3));
}

/* Visual indicator on hover */
.workspace-resize-handle::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 4px;
  height: 48px;
  background: transparent;
  border-radius: var(--ng-radius-full, 9999px);
  pointer-events: none;
  transition: background-color var(--ng-transition-fast, 100ms ease-out);
}

.workspace-layout.ng-theme .workspace-resize-handle:hover::after {
  background: var(--ng-accent-ai, #818cf8);
  opacity: 0.5;
}

/* Extended hit area for easier grabbing */
.workspace-resize-handle::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: -4px;
  right: -4px;
}

/* Panel-specific styles (legacy) */
.workspace-layout:not(.ng-theme) .left-panel {
  border-right: 1px solid var(--border-color);
}

.workspace-layout:not(.ng-theme) .center-panel {
  background: var(--bg-secondary);
}

.workspace-layout:not(.ng-theme) .right-panel {
  border-left: 1px solid var(--border-color);
}

/* Neural Glass panel gaps */
.workspace-layout.ng-theme .left-panel {
  margin-right: 0;
}

.workspace-layout.ng-theme .right-panel {
  margin-left: 0;
}

.workspace-layout.ng-theme .center-panel {
  margin-left: 0;
  margin-right: 0;
}

/* Mobile responsive - stack vertically on small screens */
@media (max-width: 768px) {
  .workspace-panel-group {
    flex-direction: column;
  }

  .workspace-resize-handle {
    width: 100%;
    height: 6px;
    cursor: row-resize;
  }

  .workspace-resize-handle::after {
    width: 48px;
    height: 4px;
  }

  .workspace-resize-handle::before {
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  .workspace-panel {
    border-right: none;
    border-bottom: 1px solid var(--border-color);
  }

  .workspace-panel:last-child {
    border-bottom: none;
  }

  .workspace-layout:not(.ng-theme) .left-panel,
  .workspace-layout:not(.ng-theme) .right-panel {
    border-right: none;
    border-left: none;
  }

  .workspace-layout.ng-theme .workspace-panel {
    margin: var(--ng-space-1, 4px);
  }
}

/* Smooth transitions for resize */
.workspace-panel {
  transition:
    opacity 0.1s ease,
    flex-basis var(--ng-duration-normal, 200ms) var(--ng-ease-out, ease-out);
}

/* Focus management for accessibility */
.workspace-panel:focus-within {
  outline: 2px solid var(--accent-color, var(--ng-accent-ai, #818cf8));
  outline-offset: -2px;
}

.workspace-layout.ng-theme .workspace-panel:focus-within {
  outline-color: var(--ng-accent-ai);
  box-shadow: 0 0 0 2px var(--ng-accent-ai-glow, rgba(129, 140, 248, 0.3));
}

/* Collapsed panel state */
.workspace-panel[data-panel-size="0"] {
  opacity: 0;
  pointer-events: none;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .workspace-panel,
  .workspace-resize-handle,
  .workspace-resize-handle::after {
    transition: none;
  }
}

/* ============================================
   Light Mode Overrides
   ============================================ */

[data-theme="light"] .workspace-layout.ng-theme .workspace-panel.ng-glass {
  box-shadow: var(--ng-shadow-md);
}

[data-theme="light"] .workspace-layout.ng-theme .workspace-resize-handle:hover {
  opacity: 0.5;
}

[data-theme="light"] .workspace-layout.ng-theme .workspace-resize-handle:active,
[data-theme="light"] .workspace-layout.ng-theme .workspace-resize-handle[data-resize-handle-active] {
  opacity: 0.7;
}

[data-theme="light"] .workspace-layout.ng-theme .workspace-panel:focus-within {
  box-shadow: 0 0 0 2px var(--ng-accent-ai-glow);
}
